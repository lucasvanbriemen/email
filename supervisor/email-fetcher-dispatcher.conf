[program:email-fetcher-dispatcher]
process_name=%(program_name)s
command=php /var/www/vhosts/lucasvanbriemen.nl/email.lucasvanbriemen.nl/artisan emails:dispatch
autostart=true
autorestart=true
user=www-data
numprocs=1
redirect_stderr=true
stdout_logfile=/var/www/vhosts/lucasvanbriemen.nl/email.lucasvanbriemen.nl/logs/dispatcher.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=10
startsecs=0
priority=999

; Supervisor configuration for the email fetching dispatcher
;
; This command continuously monitors IMAP accounts and dispatches email
; fetching jobs to the queue every X seconds (configurable via EMAIL_FETCH_INTERVAL).
;
; IMPORTANT: Update the paths below to match your server:
; - command=php /var/www/email_client/artisan emails:dispatch
;   Replace /var/www/email_client with your actual application path
; - user=www-data
;   Change to your web server user (www-data for Apache, nginx for Nginx, etc.)
; - stdout_logfile=/var/www/email_client/storage/logs/dispatcher.log
;   Update path to match your application path
;
; Installation steps:
; 1. Copy this file to /etc/supervisor/conf.d/ or your supervisor configs directory
; 2. Update the paths above
; 3. Run: sudo supervisorctl reread && sudo supervisorctl update
; 4. Start: sudo supervisorctl start email-fetcher-dispatcher
;
; Monitoring:
; - Check status: sudo supervisorctl status email-fetcher-dispatcher
; - View logs: tail -f /var/www/email_client/storage/logs/dispatcher.log
; - Restart: sudo supervisorctl restart email-fetcher-dispatcher
; - Stop: sudo supervisorctl stop email-fetcher-dispatcher
